/* 예산 페이지. 예산 대비 지출 분석.
   BudgetItem.name과 지출의 category를 매칭하여 소진율(burn rate)을 계산. */
.page {
  display: flex;
  flex-direction: column;
  gap: var(--space-4);
  padding: var(--space-4);
  max-width: 800px;
}

.header {
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
}

.headerTop {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.title {
  font-size: var(--text-lg);
  font-weight: 600;
  color: var(--text-primary);
}

.summary {
  font-size: var(--text-sm);
  font-variant-numeric: tabular-nums;
  color: var(--text-secondary);
}

.headerLabel {
  color: var(--text-tertiary);
  font-weight: 400;
}

.headerRemaining {
  margin-left: var(--space-2);
}

.headerRemaining[data-status="safe"] {
  color: var(--income-text);
}

.headerRemaining[data-status="warning"] {
  color: var(--warning-text);
}

.headerRemaining[data-status="over"] {
  color: var(--expense-text);
}

/* 섹션 (월간/연간) */
.section {
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
}

.sectionTitle {
  font-size: var(--text-xs);
  font-weight: 500;
  color: var(--text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

/* 테이블 */
.table {
  table-layout: fixed;
  white-space: nowrap;
}

/* 컬럼 너비 */
.colCategory {
  width: 64px;
}
.colBudget {
  width: 200px;
}
.colAmount {
  width: 100px;
}
.colMeter {
  width: 60px;
}

/* rowSpan으로 인해 :first-child가 된 셀의 패딩 보정 */
.table tr:not(.totalRow) > td:first-child:not([rowspan]) {
  padding-left: calc(var(--space-3) / 2);
}

/* 숫자 열 — 우측 정렬 */
.numCol {
  text-align: right;
}

/* 연환산 표시 */
.annualized {
  color: var(--text-tertiary);
}

/* 전체 예산 대비 비율 */
.pct {
  display: block;
  font-size: var(--text-xs);
  font-weight: 400;
  color: var(--text-tertiary);
}

.pctInline {
  margin-left: var(--space-1);
  font-size: var(--text-xs);
  font-weight: 400;
  color: var(--text-tertiary);
}

/* 합계 행 */
.totalRow {
  font-weight: 600;
}

/* 상태별 색상 (남은 금액 셀) */
.numCol[data-status="safe"] {
  color: var(--income-text);
}

.numCol[data-status="warning"] {
  color: var(--warning-text);
}

.numCol[data-status="over"] {
  color: var(--expense-text);
}

/* 항목 이름 */
.itemName {
  font-weight: 500;
}

/* 소진율 미터. spent/budget 비율을 시각화. safe/warning/over 3단계 상태 색상. */
.meter {
  --meter-color: var(--income-text);
}

.meter[data-status="warning"] {
  --meter-color: var(--warning-text);
}

.meter[data-status="over"] {
  --meter-color: var(--expense-text);
}

.meterTrack {
  height: 4px;
  border-radius: var(--radius-full);
  background-color: var(--bg-active);
  overflow: hidden;
}

.meterIndicator {
  height: 100%;
  border-radius: var(--radius-full);
  background-color: var(--meter-color);
  transition:
    width var(--transition-fast),
    background-color var(--transition-fast);
}

/* 메모 인디케이터 */
.memoIndicator {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 14px;
  height: 14px;
  margin-left: var(--space-1);
  font-size: 10px;
  font-style: italic;
  font-weight: 600;
  line-height: 1;
  color: var(--text-secondary);
  border: 1px solid var(--border-default);
  border-radius: var(--radius-full);
  vertical-align: middle;
}

.memoIndicator:hover {
  color: var(--text-primary);
  border-color: var(--text-secondary);
}

/* 메모 다이얼로그 */
.memoBackdrop {
  position: fixed;
  inset: 0;
  background-color: rgba(0, 0, 0, 0.6);
  z-index: 50;
}

.memoPopup {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 51;
  width: min(90vw, 360px);
  background-color: var(--bg-elevated);
  border: 1px solid var(--border-default);
  border-radius: var(--radius-xl);
  padding: var(--space-5);
  box-shadow: var(--shadow-popup);
}

.memoTitle {
  font-size: var(--text-base);
  font-weight: 600;
  color: var(--text-primary);
  margin-bottom: var(--space-3);
}

.memoContent {
  font-size: var(--text-sm);
  line-height: 1.6;
  color: var(--text-secondary);
  white-space: pre-line;
}

.memoFooter {
  display: flex;
  justify-content: flex-end;
  margin-top: var(--space-4);
}

.memoClose {
  padding: var(--space-2) var(--space-4);
  font-size: var(--text-sm);
  font-weight: 500;
  color: var(--text-secondary);
  background-color: var(--bg-surface);
  border: 1px solid var(--border-default);
  border-radius: var(--radius-md);
  transition:
    background-color var(--transition-fast),
    color var(--transition-fast);
}

.memoClose:hover {
  color: var(--text-primary);
  background-color: var(--bg-hover);
}
